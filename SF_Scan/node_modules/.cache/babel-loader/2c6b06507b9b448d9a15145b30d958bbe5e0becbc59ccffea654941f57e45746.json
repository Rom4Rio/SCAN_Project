{"ast":null,"code":"var _s = $RefreshSig$();\nimport { createSlice } from '@reduxjs/toolkit';\nimport { useSelector } from \"react-redux\";\nexport const tokenSlice = createSlice({\n  name: 'token',\n  initialState: {\n    token: localStorage.getItem('token') || '',\n    expire: localStorage.getItem('expire') || new Date().toString()\n  },\n  reducers: {\n    setToken: (state, action) => {\n      const data = action.payload;\n      state.token = data.accessToken;\n      localStorage.setItem('token', data.accessToken);\n      state.expire = data.expire;\n      localStorage.setItem('expire', data.expire);\n    },\n    clearToken: state => {\n      state.token = '';\n      localStorage.removeItem('token');\n      state.expire = new Date().toString();\n      localStorage.removeItem('expire');\n    }\n  }\n});\nexport const useToken = () => {\n  _s();\n  const token = useSelector(state => state.token.token);\n  const expire = useSelector(state => state.token.expire);\n  const expireDate = new Date(expire);\n  const currentDate = new Date();\n  if (currentDate >= expireDate) {\n    return false;\n  }\n  return token;\n};\n_s(useToken, \"RqsZikMAjk9hxWHpbhtWpA0BR0U=\", false, function () {\n  return [useSelector, useSelector];\n});\nexport const {\n  setToken,\n  clearToken\n} = tokenSlice.actions;\nexport default tokenSlice.reducer;","map":{"version":3,"names":["createSlice","useSelector","tokenSlice","name","initialState","token","localStorage","getItem","expire","Date","toString","reducers","setToken","state","action","data","payload","accessToken","setItem","clearToken","removeItem","useToken","_s","expireDate","currentDate","actions","reducer"],"sources":["C:/Users/roman/OneDrive/Рабочий стол/SF_Scan/src/redux/token.js"],"sourcesContent":["import { createSlice } from '@reduxjs/toolkit'\nimport {useSelector} from \"react-redux\";\n\nexport const tokenSlice = createSlice({\n    name: 'token',\n    initialState: {\n        token: localStorage.getItem('token') || '',\n        expire: localStorage.getItem('expire') || new Date().toString(),\n    },\n    reducers: {\n        setToken: (state, action) => {\n            const data = action.payload\n            state.token = data.accessToken\n            localStorage.setItem('token', data.accessToken)\n            state.expire = data.expire\n            localStorage.setItem('expire', data.expire)\n        },\n        clearToken: (state) => {\n            state.token = ''\n            localStorage.removeItem('token')\n            state.expire = new Date().toString()\n            localStorage.removeItem('expire')\n        }\n    }\n})\n\nexport const useToken = () => {\n    const token = useSelector((state) => state.token.token)\n    const expire = useSelector((state) => state.token.expire)\n    const expireDate = new Date(expire)\n    const currentDate = new Date()\n    if (currentDate >= expireDate) {\n        return false\n    }\n    return token\n}\n\nexport const { setToken, clearToken } = tokenSlice.actions\n\nexport default tokenSlice.reducer"],"mappings":";AAAA,SAASA,WAAW,QAAQ,kBAAkB;AAC9C,SAAQC,WAAW,QAAO,aAAa;AAEvC,OAAO,MAAMC,UAAU,GAAGF,WAAW,CAAC;EAClCG,IAAI,EAAE,OAAO;EACbC,YAAY,EAAE;IACVC,KAAK,EAAEC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,IAAI,EAAE;IAC1CC,MAAM,EAAEF,YAAY,CAACC,OAAO,CAAC,QAAQ,CAAC,IAAI,IAAIE,IAAI,CAAC,CAAC,CAACC,QAAQ,CAAC;EAClE,CAAC;EACDC,QAAQ,EAAE;IACNC,QAAQ,EAAEA,CAACC,KAAK,EAAEC,MAAM,KAAK;MACzB,MAAMC,IAAI,GAAGD,MAAM,CAACE,OAAO;MAC3BH,KAAK,CAACR,KAAK,GAAGU,IAAI,CAACE,WAAW;MAC9BX,YAAY,CAACY,OAAO,CAAC,OAAO,EAAEH,IAAI,CAACE,WAAW,CAAC;MAC/CJ,KAAK,CAACL,MAAM,GAAGO,IAAI,CAACP,MAAM;MAC1BF,YAAY,CAACY,OAAO,CAAC,QAAQ,EAAEH,IAAI,CAACP,MAAM,CAAC;IAC/C,CAAC;IACDW,UAAU,EAAGN,KAAK,IAAK;MACnBA,KAAK,CAACR,KAAK,GAAG,EAAE;MAChBC,YAAY,CAACc,UAAU,CAAC,OAAO,CAAC;MAChCP,KAAK,CAACL,MAAM,GAAG,IAAIC,IAAI,CAAC,CAAC,CAACC,QAAQ,CAAC,CAAC;MACpCJ,YAAY,CAACc,UAAU,CAAC,QAAQ,CAAC;IACrC;EACJ;AACJ,CAAC,CAAC;AAEF,OAAO,MAAMC,QAAQ,GAAGA,CAAA,KAAM;EAAAC,EAAA;EAC1B,MAAMjB,KAAK,GAAGJ,WAAW,CAAEY,KAAK,IAAKA,KAAK,CAACR,KAAK,CAACA,KAAK,CAAC;EACvD,MAAMG,MAAM,GAAGP,WAAW,CAAEY,KAAK,IAAKA,KAAK,CAACR,KAAK,CAACG,MAAM,CAAC;EACzD,MAAMe,UAAU,GAAG,IAAId,IAAI,CAACD,MAAM,CAAC;EACnC,MAAMgB,WAAW,GAAG,IAAIf,IAAI,CAAC,CAAC;EAC9B,IAAIe,WAAW,IAAID,UAAU,EAAE;IAC3B,OAAO,KAAK;EAChB;EACA,OAAOlB,KAAK;AAChB,CAAC;AAAAiB,EAAA,CATYD,QAAQ;EAAA,QACHpB,WAAW,EACVA,WAAW;AAAA;AAS9B,OAAO,MAAM;EAAEW,QAAQ;EAAEO;AAAW,CAAC,GAAGjB,UAAU,CAACuB,OAAO;AAE1D,eAAevB,UAAU,CAACwB,OAAO"},"metadata":{},"sourceType":"module","externalDependencies":[]}