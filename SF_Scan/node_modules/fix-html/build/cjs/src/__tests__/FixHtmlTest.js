"use strict";

var _interopRequireDefault = require("reshow-runtime/helpers/interopRequireDefault");

var _chai = require("chai");

var _sanitizeHtml = _interopRequireDefault(require("sanitize-html"));

var _index = _interopRequireDefault(require("../index"));

describe('Test fixHtml', function () {
  it('simple test', function () {
    var a = (0, _index["default"])();
    (0, _chai.expect)(a).to.equal('<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body></body></html>');
  });
  it('fix un-close tag', function () {
    var input = '<a a=" b="c">"=""</a><span a=" b="c">foo';
    var a = (0, _index["default"])(input, _sanitizeHtml["default"]);
    (0, _chai.expect)(a).to.equal('<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body><a>"=""</a><span>foo</span></body></html>');
  });
  it('test doctype', function () {
    var input = '<!doctype html><html></html>';
    var a = (0, _index["default"])(input, _sanitizeHtml["default"]);
    var b = (0, _index["default"])(input);
    var expected = '<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml"><head></head><body></body></html>';
    (0, _chai.expect)(a).to.equal(expected);
    (0, _chai.expect)(b).to.equal(expected);
  });
  it('test special case', function () {
    var input = '<img alt=" height=" 60" src="https://fs.xxx.com.tw/upload/harddisc/file_name_541.png" width="120" />';
    var a = (0, _index["default"])(input, _sanitizeHtml["default"]);
    (0, _chai.expect)(a).to.equal('<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body><img alt=" height=" src="https://fs.xxx.com.tw/upload/harddisc/file_name_541.png" width="120" /></body></html>');
  });
  it('convert xml to html', function () {
    var input = '&amp;';
    var a = (0, _index["default"])(input, _sanitizeHtml["default"]);
    var expected = '<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>&</body></html>';
    (0, _chai.expect)(a).to.equal(expected);
  });
});
describe('Test component only', function () {
  it('simple test', function () {
    var input = '<span />';
    var a = (0, _index["default"])(input, _sanitizeHtml["default"], true);
    (0, _chai.expect)(a).to.equal('<span></span>');
  });
  it('fix un-close tag', function () {
    var input = '<a a=" b="c">"=""</a><span a=" b="c">foo';
    var a = (0, _index["default"])(input, _sanitizeHtml["default"], true);
    (0, _chai.expect)(a).to.equal('<a>"=""</a><span>foo</span>');
  });
  it('convert xml to html', function () {
    var input = '&amp;';
    var a = (0, _index["default"])(input, _sanitizeHtml["default"], true);
    var expected = '&';
    (0, _chai.expect)(a).to.equal(expected);
  });
});